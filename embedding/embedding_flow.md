Upstage κΈ°λ° μ„λ² λ”© νμ΄ν”„λΌμΈ

κ°μ”

μ΄ λ¨λ“(embed_upstage.py)μ€ Upstage Solar μ„λ² λ”© APIλ¥Ό ν™μ©ν•΄ λ²•λ¥ /νΉν—
λ°μ΄ν„°μ…‹μ„ λ²΅ν„°ν™”ν•κ³ , λ΅μ»¬μ— μ €μ¥ν•©λ‹λ‹¤.
ν–¥ν›„ Qdrant μ„λ²„ μ„Έν… μ‹, μ΄ λ΅μ»¬ λ²΅ν„°λ“¤μ„ μ—…λ΅λ“ν•μ—¬ κ²€μƒ‰ μ‹μ¤ν…μ—
μ—°κ²°ν•  μ μμµλ‹λ‹¤.

------------------------------------------------------------------------

μ‚¬μ© λ¨λΈ

-   solar-embedding-1-large-passage β†’ λ¬Έμ„(passages) μ„λ² λ”©μ©
-   solar-embedding-1-large-query β†’ μ‚¬μ©μ μ§μ(query) μ„λ² λ”©μ©
-   μ°¨μ›(Dimension): 1024 (λ‘ λ¨λΈ λ™μΌ)

------------------------------------------------------------------------

λ°μ΄ν„°μ…‹ μ²λ¦¬

π“‚ λ²•λ¥  λ°μ΄ν„° (ip_legal_data/train/labeled/)

-   μ§μμ‘λ‹µ λ°μ΄ν„°

        { "μ§λ¬Έ": "...", "λ‹µλ³€": "..." }

-   μ”μ•½ λ°μ΄ν„°

        { "λ³Έλ¬Έ": "...", "μ”μ•½": "..." }

-   κΈ°νƒ€ κµ¬μ΅° (title + output λ“±)λ„ λ€μ‘

π“‚ νΉν— λ°μ΄ν„° (patent_data/train/raw/)

-   μ£Όμ” ν•„λ“:
    -   λ°λ…μλ…μΉ­ (invention_title)
    -   μ”μ•½ (abstract)
    -   ν‚¤μ›λ“ (keyword)
    -   μ²­κµ¬ν•­ (claims)
    -   λ‚ μ§/μ‹λ³„μ λ©”νƒ€λ°μ΄ν„° (application_date, register_date,
        documentId λ“±)

------------------------------------------------------------------------

μ¤ν‚¤λ§ (μ €μ¥ ν•μ‹)

μ €μ¥λλ” λ΅μ»¬ νμΌμ€ .jsonl ν•μ‹μ…λ‹λ‹¤.
κ° μ¤„μ€ ν•λ‚μ λ²΅ν„° + λ©”νƒ€λ°μ΄ν„° λ μ½”λ“:

    {
      "id": "ν•΄μ‹κ°’",
      "vector": [0.01, -0.02, ...],   // passage μ„λ² λ”© (1024μ°¨μ›)
      "metadata": {
        "category": "legal" | "patent",
        "task": "LEGAL_QA" | "LEGAL_SUMMARY" | "PATENT_ABS",
        "question": "...",
        "answer": "...",
        "content": "...",
        "summary": "...",
        "title": "...",
        "claims": "...",
        "file": "μ›λ³ΈνμΌλ….json"
      }
    }

------------------------------------------------------------------------

μ‹¤ν–‰ λ°©λ²•

1.  .env νμΌ μƒμ„±

        UPSTAGE_API_KEY=λ°κΈ‰λ°›μ€_API_KEY

2.  μ¤ν¬λ¦½νΈ μ‹¤ν–‰

        python embed_upstage.py

3.  κ²°κ³Ό νμΌ ν™•μΈ

    -   legal_embeddings.json
    -   patent_embeddings.json

------------------------------------------------------------------------

Query μμ‹

    from embed_upstage import embed_query

    q = "νΉν— μ¶μ›μΌμ΄ μ–Έμ μΈκ°€μ”?"
    vec = embed_query(q)
    print(len(vec))  # 1024
    print(vec[:5])   # μ• 5κ° κ°’ μ¶λ ¥

------------------------------------------------------------------------

TODO

-   ν„μ¬λ” λ΅μ»¬ μ €μ¥λ§ μ§„ν–‰
-   μ¶”ν›„ Qdrant μ„λ²„ μ„Έν… μ™„λ£ ν›„, ν•΄λ‹Ή JSONLμ„ μ½μ–΄ upsert() λ°©μ‹μΌλ΅
    λ²΅ν„° DBμ— μ—…λ΅λ“ μμ •
